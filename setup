#
# Set the SC_LAUNCHPAD environment variable to the root
# of the launchpad repository so that the engines and
# executable can be found.
#
export SC_LAUNCHPAD=$PWD

#
# Identify the tool version
#
VERSION=0.3.0

#
# Identify the tool architecture
#
ARCH=`uname -m`

#
# Add a shortcut to the desired version and architecture 
#
rm -f bin/spacecraft
ln -s $SC_LAUNCHPAD/bin/spacecraft-${VERSION}-${ARCH} bin/spacecraft

#
# Add the shortcut to the path (if needed)
#
if [[ "$PATH" != *"$SC_LAUNCHPAD"* ]]; then
	PATH=$PATH:$SC_LAUNCHPAD/bin
fi

#
# Add a function to create new engines
#
function create () {
	engine=$1;
	if [[ "$engine" == "" ]]; then
		echo "Usage: create ENGINE";
	else
		echo "Creating \$SC_LAUNCHPAD/engines/$engine.pl";
		sed "s/<engine>/$engine/" $SC_LAUNCHPAD/template/engine.pl > $SC_LAUNCHPAD/engines/$engine.pl;
		echo "Creating \$SC_LAUNCHPAD/docs/_engines/$engine.pl.md";
		sed "s/<engine>/$engine/" $SC_LAUNCHPAD/template/engine.pl.md > $SC_LAUNCHPAD/docs/_engines/$engine.pl.md;
	fi
}